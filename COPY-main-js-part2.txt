                    const counter = entry.target;
                    animateCounter(counter);
                    counterObserver.unobserve(counter);
                }
            });
        });

        counters.forEach(counter => {
            counterObserver.observe(counter);
        });
    }

    // Intersection Observer ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    setupIntersectionObserver() {
        const animatedElements = document.querySelectorAll('.feature-card, .pricing-card, .command-card, .support-card, .step');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        animatedElements.forEach(element => {
            observer.observe(element);
        });
    }

    // ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    setupSmoothScroll() {
        const links = document.querySelectorAll('a[href^="#"]');
        
        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                
                const targetId = link.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    const headerHeight = document.querySelector('.header').offsetHeight;
                    const targetPosition = targetElement.offsetTop - headerHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
    }

    // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    setupMobileMenu() {
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.querySelector('.nav-menu');
        
        if (navToggle && navMenu) {
            navToggle.addEventListener('click', () => {
                navToggle.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    navToggle.classList.remove('active');
                    navMenu.classList.remove('active');
                });
            });
        }
    }

    // Bot ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é–¢é€£
    setupBotStatus() {
        console.log('ðŸ¤– Setting up bot status...');
        this.updateMultipleBotStatus();
        
        // 1åˆ†ã”ã¨ã«Botã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
        setInterval(() => {
            this.updateMultipleBotStatus();
        }, 60000);
    }

    async updateMultipleBotStatus() {
        try {
            // é–‹ç™ºç’°å¢ƒã¨productionç’°å¢ƒã§APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆ
            const apiBaseUrl = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
                ? 'http://localhost:3001'  // é–‹ç™ºç’°å¢ƒ
                : 'https://aivis-chan-bot.com';  // æœ¬ç•ªç’°å¢ƒï¼ˆãƒ—ãƒ­ã‚­ã‚·çµŒç”±ï¼‰
                
            const response = await fetch(`${apiBaseUrl}/api/bot-stats`);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const allStatsData = await response.json();
            console.log('ðŸ“Š Bot stats received:', allStatsData);
            
            this.updateBotDetailPage(allStatsData.bots);
            
        } catch (error) {
            console.error('âŒ Error fetching bot status:', error);
        }
    }

    updateBotDetailPage(botStatuses) {
        console.log('updateBotDetailPage called with:', botStatuses);
    }

    generateSpecificInviteLink(botId) {
        return `https://discord.com/api/oauth2/authorize?client_id=${botId}&permissions=3145728&scope=bot`;
    }

    // ãƒ’ãƒ¼ãƒ­ãƒ¼çµ±è¨ˆæƒ…å ±ã®è¨­å®šã¨æ›´æ–°
    async setupHeroStats() {
        console.log('ðŸ”¢ Setting up hero statistics...');
        await this.updateHeroStats();
        
        // 5åˆ†ã”ã¨ã«çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        setInterval(() => {
            this.updateHeroStats();
        }, 5 * 60 * 1000);
    }

    // å…¨Botçµ±è¨ˆæƒ…å ±ã‚’å–å¾—ã—ã¦ãƒ’ãƒ¼ãƒ­ãƒ¼éƒ¨åˆ†ã‚’æ›´æ–°
    async updateHeroStats() {
        try {
            // é–‹ç™ºç’°å¢ƒã¨productionç’°å¢ƒã§APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆ
            const apiBaseUrl = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
                ? 'http://localhost:3001'  // é–‹ç™ºç’°å¢ƒ
                : 'https://aivis-chan-bot.com';  // æœ¬ç•ªç’°å¢ƒï¼ˆãƒ—ãƒ­ã‚­ã‚·çµŒç”±ï¼‰
                
            const response = await fetch(`${apiBaseUrl}/api/bot-stats`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const allStatsData = await response.json();
            console.log('ðŸ“Š All bot stats received:', allStatsData);

            // å…¨Botã®åˆè¨ˆçµ±è¨ˆã‚’è¨ˆç®—
            const totals = {
                servers: 0,
                users: 0,
                uptime: 0,
                onlineBots: 0
            };

            allStatsData.bots.forEach(bot => {
                if (bot.success && bot.online) {
                    totals.servers += bot.server_count || 0;
                    totals.users += bot.user_count || 0;
                    totals.onlineBots++;
                }
            });

            // å¹³å‡ç¨¼åƒçŽ‡ã‚’è¨ˆç®—
            if (totals.onlineBots > 0) {
                const uptimeSum = allStatsData.bots
                    .filter(bot => bot.success && bot.online)
                    .reduce((sum, bot) => sum + (bot.uptime || 0), 0);
                totals.uptime = uptimeSum / totals.onlineBots;
            }

            // ãƒ’ãƒ¼ãƒ­ãƒ¼çµ±è¨ˆã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã§æ›´æ–°
            this.animateHeroStat('total-servers', totals.servers);
            this.animateHeroStat('total-users', totals.users);
            this.animateHeroStat('total-uptime', totals.uptime.toFixed(1));

        } catch (error) {
            console.error('âŒ Error fetching hero stats:', error);
            
            // ã‚¨ãƒ©ãƒ¼æ™‚ã®è¡¨ç¤º
            document.getElementById('total-servers').textContent = 'API ã‚¨ãƒ©ãƒ¼';
            document.getElementById('total-users').textContent = 'API ã‚¨ãƒ©ãƒ¼';
            document.getElementById('total-uptime').textContent = 'API ã‚¨ãƒ©ãƒ¼';
        }
    }

    // çµ±è¨ˆæ•°å€¤ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã§æ›´æ–°
    animateHeroStat(elementId, targetValue) {
        const element = document.getElementById(elementId);
        if (!element) return;

        const startValue = 0;
        const duration = 2000; // 2ç§’
        const startTime = Date.now();

        const animate = () => {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            // easeOutQuart ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é–¢æ•°
            const easedProgress = 1 - Math.pow(1 - progress, 4);
            
            const currentValue = Math.floor(startValue + (targetValue - startValue) * easedProgress);
            
            if (elementId === 'total-uptime') {
                element.textContent = (startValue + (targetValue - startValue) * easedProgress).toFixed(1);
            } else {
                element.textContent = currentValue.toLocaleString();
            }

            if (progress < 1) {
                requestAnimationFrame(animate);
            }
        };

        animate();
    }
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', () => {
    const website = new AivisWebsite();
});

export default AivisWebsite;
